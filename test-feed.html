<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Feed Test - Selira AI</title>

  <style>
    :root {
      --bg-primary: #0a0a0a;
      --bg-secondary: #1a1a1a;
      --bg-tertiary: #2a2a2a;
      --bg-sidebar: #1a1a1a;
      --text-primary: #ffffff;
      --text-secondary: #b3b3b3;
      --text-muted: #888888;
      --accent: #ce93d8;
      --accent-hover: #ba68c8;
      --accent-secondary: #ec4899;
      --border: #333333;
      --border-color: #333333;
      --success: #10b981;
      --error: #ef4444;
      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background-color: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
    }

    .app-container {
      display: flex;
      min-height: 100vh;
    }

    /* Left Sidebar Navigation */
    .sidebar {
      width: 220px;
      background: var(--bg-sidebar);
      border-right: none;
      padding: 16px;
      display: flex;
      flex-direction: column;
      position: fixed;
      height: 100vh;
      left: 0;
      top: 0;
      z-index: 100;
      overflow-y: auto;
    }

    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 24px;
      padding-bottom: 16px;
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      text-decoration: none;
      color: inherit;
      transition: opacity 0.2s ease;
    }

    .sidebar-logo:hover {
      opacity: 0.8;
      text-decoration: none;
      color: inherit;
    }

    .sidebar-logo-text {
      font-family: 'Playfair Display', serif;
      font-size: 16px;
      font-weight: 700;
      color: var(--accent);
    }

    .sidebar-nav {
      flex: 1;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      margin-bottom: 2px;
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      border-radius: var(--radius-sm);
      transition: all 0.2s ease;
      font-weight: 500;
      font-size: 13px;
    }

    .nav-item:hover, .nav-item.active {
      background: rgba(255, 255, 255, 0.1);
      color: white;
    }

    .nav-item-icon {
      font-size: 14px;
      width: 18px;
      height: 18px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-shrink: 0;
    }

    .nav-item-icon svg {
      width: 18px;
      height: 18px;
      stroke: var(--accent);
    }

    .nav-section-title {
      font-size: 9px;
      font-weight: 700;
      color: rgba(255, 255, 255, 0.6);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin: 12px 0 4px;
      padding: 0 10px;
    }

    /* Sidebar Overlay for Mobile */
    .sidebar-overlay {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.7);
      z-index: 90;
    }

    .sidebar-overlay.active {
      display: block;
    }

    /* Mobile Sidebar */
    @media (max-width: 768px) {
      .sidebar {
        transform: translateX(-100%);
        transition: transform 0.3s ease;
      }

      .sidebar.active {
        transform: translateX(0);
      }
    }

    /* Main Content */
    .main-content {
      flex: 1;
      margin-left: 220px;
      padding: 0;
      overflow-y: auto;
      height: 100vh;
    }

    @media (max-width: 768px) {
      .main-content {
        margin-left: 0;
        margin-bottom: 60px;
        height: calc(100vh - 60px);
      }
    }

    /* Mobile Header */
    .mobile-header {
      display: none;
      align-items: center;
      justify-content: space-between;
      padding: 12px 16px;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      position: sticky;
      top: 0;
      z-index: 50;
    }

    @media (max-width: 768px) {
      .mobile-header {
        display: flex;
      }
    }

    .mobile-header-title {
      font-family: 'Playfair Display', serif;
      font-size: 18px;
      font-weight: 700;
      color: var(--accent);
    }

    .hamburger-menu {
      width: 24px;
      height: 24px;
      display: flex;
      flex-direction: column;
      justify-content: space-around;
      cursor: pointer;
      padding: 4px 0;
    }

    .hamburger-menu span {
      width: 100%;
      height: 2px;
      background: white;
      border-radius: 2px;
      transition: all 0.3s ease;
    }

    /* Feed Container */
    .feed-container {
      max-width: 600px;
      margin: 0 auto;
      padding: 0;
      height: 100%;
      overflow-y: scroll;
      scroll-snap-type: y mandatory;
      -webkit-overflow-scrolling: touch;
      scroll-behavior: smooth;
    }

    /* Feed Item (TikTok style) */
    .feed-item {
      position: relative;
      width: 100%;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      scroll-snap-align: start;
      scroll-snap-stop: always;
      background: #000;
    }

    .feed-item-image {
      width: 100%;
      height: auto;
      max-width: 100%;
      max-height: 100vh;
      object-fit: contain;
    }

    /* Feed Item Overlay */
    .feed-item-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 20px;
      background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);
      z-index: 10;
    }

    .feed-item-companion {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 12px;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
      width: fit-content;
    }

    .feed-item-companion:hover {
      opacity: 0.9;
    }

    .feed-item-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      border: 2px solid var(--accent);
    }

    .feed-item-info h3 {
      font-size: 15px;
      font-weight: 600;
      margin-bottom: 2px;
    }

    .feed-item-info p {
      font-size: 12px;
      color: var(--text-secondary);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .feed-item-creator {
      font-size: 11px;
      color: var(--text-muted);
      margin-top: 4px;
      margin-bottom: 8px;
    }

    .feed-item-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
    }

    .feed-tag {
      padding: 4px 8px;
      background: rgba(206, 147, 216, 0.1);
      border: 1px solid rgba(206, 147, 216, 0.3);
      border-radius: 12px;
      font-size: 10px;
      color: var(--accent);
      font-weight: 500;
    }

    /* Action Icons (Right Side) */
    .feed-item-actions {
      position: absolute;
      right: 12px;
      bottom: 80px;
      display: flex;
      flex-direction: column;
      gap: 20px;
      align-items: center;
      z-index: 15;
    }

    .action-btn {
      background: none;
      border: none;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      color: white;
      transition: all 0.2s ease;
      padding: 0;
      min-width: 44px;
      min-height: 44px;
      justify-content: center;
      text-decoration: none;
    }

    .action-btn:hover {
      transform: scale(1.1);
    }

    .action-btn.liked svg {
      fill: #ff6b6b;
      stroke: #ff6b6b;
    }

    .action-icon {
      width: 32px;
      height: 32px;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.4));
      stroke: var(--accent);
    }

    .action-count {
      font-size: 12px;
      font-weight: 600;
      text-shadow: 0 1px 2px rgba(0,0,0,0.8);
    }

    /* Loading State */
    .feed-loading {
      display: flex;
      align-items: center;
      justify-content: center;
      min-height: 100vh;
      color: var(--text-secondary);
    }

    .feed-loading.hidden {
      display: none;
    }

    .spinner {
      border: 3px solid rgba(206, 147, 216, 0.2);
      border-top-color: var(--accent);
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Mobile Navigation */
    .mobile-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-secondary);
      border-top: 1px solid var(--border);
      padding: 8px 0;
      z-index: 100;
    }

    @media (max-width: 768px) {
      .mobile-nav {
        display: block;
      }
    }

    .mobile-nav-items {
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    .mobile-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      padding: 8px 16px;
      text-decoration: none;
      color: var(--text-secondary);
      font-size: 11px;
      transition: color 0.2s ease;
      min-width: 60px;
    }

    .mobile-nav-item.active,
    .mobile-nav-item:hover {
      color: var(--accent);
    }

    .mobile-nav-item svg {
      width: 22px;
      height: 22px;
    }

    .mobile-nav-item.active svg {
      stroke: var(--accent);
    }

    /* Test Controls */
    .test-controls {
      position: fixed;
      top: 20px;
      right: 20px;
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 16px;
      z-index: 200;
      max-width: 300px;
    }

    .test-controls h4 {
      margin-bottom: 12px;
      font-size: 14px;
      color: var(--accent);
    }

    .test-controls button {
      width: 100%;
      padding: 8px 12px;
      background: var(--accent);
      color: white;
      border: none;
      border-radius: var(--radius-sm);
      cursor: pointer;
      font-size: 12px;
      margin-bottom: 8px;
      transition: background 0.2s ease;
    }

    .test-controls button:hover {
      background: var(--accent-hover);
    }

    .test-controls .status {
      font-size: 11px;
      color: var(--text-secondary);
      margin-top: 8px;
      padding-top: 8px;
      border-top: 1px solid var(--border);
    }
  </style>
</head>
<body>
  <div class="app-container">
    <!-- Left Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
      <!-- Logo -->
      <a href="/" class="sidebar-logo">
        <div class="sidebar-logo-text">Selira AI</div>
      </a>

      <!-- Navigation -->
      <nav class="sidebar-nav">
        <a href="/" class="nav-item">
          <span class="nav-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg></span>
          <span>Discover</span>
        </a>
        <a href="#" class="nav-item active">
          <span class="nav-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg></span>
          <span>Feed (TEST)</span>
        </a>
        <a href="/my-companions" class="nav-item">
          <span class="nav-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg></span>
          <span>My Companions</span>
        </a>
        <a href="/create" class="nav-item">
          <span class="nav-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg></span>
          <span>Create</span>
        </a>

        <div class="nav-section-title">Account</div>

        <a href="/profile" class="nav-item">
          <span class="nav-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg></span>
          <span>Profile</span>
        </a>
        <a href="/pricing" class="nav-item">
          <span class="nav-item-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2v20M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path></svg></span>
          <span>Pricing</span>
        </a>
      </nav>
    </aside>

    <!-- Sidebar Overlay for Mobile -->
    <div class="sidebar-overlay" id="sidebarOverlay"></div>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Mobile Header -->
      <div class="mobile-header">
        <div class="hamburger-menu" id="hamburgerMenu">
          <span></span>
          <span></span>
          <span></span>
        </div>
        <div class="mobile-header-title">Feed Test</div>
        <div style="width: 24px;"></div>
      </div>

      <!-- Feed Container -->
      <div class="feed-container" id="feedContainer">
        <!-- Loading State -->
        <div class="feed-loading" id="feedLoading">
          <div class="spinner"></div>
        </div>

        <!-- Feed items will be inserted here by JavaScript -->
      </div>
    </main>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
      <div class="mobile-nav-items">
        <a href="/" class="mobile-nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
          <span>Home</span>
        </a>
        <a href="#" class="mobile-nav-item active">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg>
          <span>Feed</span>
        </a>
        <a href="/create" class="mobile-nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
          <span>Create</span>
        </a>
        <a href="/my-companions" class="mobile-nav-item">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
          <span>Chats</span>
        </a>
      </div>
    </nav>

    <!-- Test Controls -->
    <div class="test-controls">
      <h4>ðŸ§ª Test Controls</h4>
      <button onclick="loadMockData()">Load Mock Feed</button>
      <button onclick="addMockItem()">Add Random Item</button>
      <button onclick="clearFeed()">Clear Feed</button>
      <div class="status" id="testStatus">Ready to test</div>
    </div>
  </div>

  <script>
    // Mock data for testing (square 1024x1024 images like image generation)
    const mockImages = [
      'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=1024&h=1024&fit=crop',
      'https://images.unsplash.com/photo-1517841905240-472988babdf9?w=1024&h=1024&fit=crop',
      'https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=1024&h=1024&fit=crop',
      'https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=1024&h=1024&fit=crop',
      'https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?w=1024&h=1024&fit=crop'
    ];

    const mockCompanions = [
      { name: 'Amber Marie', slug: 'amber-marie', description: 'Your confident and feminine new secretary, eager to please and make a good impression on you', avatar: 'https://i.pravatar.cc/150?img=1', creator: 'Selira', tags: ['Realistic', 'Girlfriend', 'Romance', 'NSFW'] },
      { name: 'Sophie Chen', slug: 'sophie-chen', description: 'Playful and adventurous anime girl who loves exploring new worlds with you', avatar: 'https://i.pravatar.cc/150?img=5', creator: 'UserX2024', tags: ['Anime-Manga', 'Adventure', 'Cute'] },
      { name: 'Emma Wilson', slug: 'emma-wilson', description: 'Sweet and caring girlfriend who always supports you through thick and thin', avatar: 'https://i.pravatar.cc/150?img=9', creator: 'Selira', tags: ['Realistic', 'Romance', 'Girlfriend'] },
      { name: 'Isabella Rodriguez', slug: 'isabella', description: 'Passionate latina who knows exactly what she wants and how to get it', avatar: 'https://i.pravatar.cc/150?img=10', creator: 'CreatorPro', tags: ['Realistic', 'Latina', 'NSFW', 'Spicy'] },
      { name: 'Luna Park', slug: 'luna-park', description: 'Mysterious and alluring magical girl with secrets waiting to be discovered by you', avatar: 'https://i.pravatar.cc/150?img=16', creator: 'Selira', tags: ['Anime-Manga', 'Mystery', 'Fantasy'] }
    ];

    let feedItems = [];

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      console.log('ðŸ§ª Test feed loaded');

      // Setup hamburger menu
      const hamburger = document.getElementById('hamburgerMenu');
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebarOverlay');

      hamburger?.addEventListener('click', () => {
        sidebar.classList.toggle('active');
        overlay.classList.toggle('active');
      });

      overlay?.addEventListener('click', () => {
        sidebar.classList.remove('active');
        overlay.classList.remove('active');
      });

      // Auto-load mock data
      setTimeout(() => {
        loadMockData();
      }, 500);
    });

    // Load mock feed data
    function loadMockData() {
      const loadingEl = document.getElementById('feedLoading');
      const feedContainer = document.getElementById('feedContainer');
      const statusEl = document.getElementById('testStatus');

      loadingEl.classList.remove('hidden');
      statusEl.textContent = 'Loading mock data...';

      setTimeout(() => {
        // Create 5 mock items
        for (let i = 0; i < 5; i++) {
          const mockItem = {
            id: `mock-${Date.now()}-${i}`,
            image_url: mockImages[i % mockImages.length],
            companion: mockCompanions[i % mockCompanions.length],
            like_count: Math.floor(Math.random() * 14) + 2, // Random 2-15
            prompt: 'Generated image prompt'
          };

          feedItems.push(mockItem);
          const feedItemEl = createFeedItem(mockItem);
          feedContainer.appendChild(feedItemEl);
        }

        loadingEl.classList.add('hidden');
        statusEl.textContent = `Loaded ${feedItems.length} mock items`;
      }, 1000);
    }

    // Add single mock item
    function addMockItem() {
      const feedContainer = document.getElementById('feedContainer');
      const statusEl = document.getElementById('testStatus');

      const randomImg = mockImages[Math.floor(Math.random() * mockImages.length)];
      const randomCompanion = mockCompanions[Math.floor(Math.random() * mockCompanions.length)];

      const mockItem = {
        id: `mock-${Date.now()}`,
        image_url: randomImg,
        companion: randomCompanion,
        like_count: Math.floor(Math.random() * 14) + 2, // Random 2-15
        prompt: 'Generated image prompt'
      };

      feedItems.push(mockItem);
      const feedItemEl = createFeedItem(mockItem);
      feedContainer.appendChild(feedItemEl);

      statusEl.textContent = `Added item. Total: ${feedItems.length}`;
    }

    // Clear feed
    function clearFeed() {
      const feedContainer = document.getElementById('feedContainer');
      const statusEl = document.getElementById('testStatus');

      // Remove all feed items except loading
      const items = feedContainer.querySelectorAll('.feed-item');
      items.forEach(item => item.remove());

      feedItems = [];
      statusEl.textContent = 'Feed cleared';
    }

    // Create feed item element
    function createFeedItem(item) {
      const div = document.createElement('div');
      div.className = 'feed-item';
      div.dataset.itemId = item.id;

      // Create image
      const img = document.createElement('img');
      img.className = 'feed-item-image';
      img.src = item.image_url;
      img.alt = item.companion.name;
      img.loading = 'lazy';

      // Create overlay
      const overlay = document.createElement('div');
      overlay.className = 'feed-item-overlay';

      // Companion link
      const companionLink = document.createElement('a');
      companionLink.className = 'feed-item-companion';
      companionLink.href = `/chat.html?char=${item.companion.slug}`;

      // Truncate description to ~8 words
      const description = item.companion.description || item.companion.title || '';
      const words = description.split(' ');
      const truncatedDescription = words.length > 8
        ? words.slice(0, 8).join(' ') + '...'
        : description;

      companionLink.innerHTML = `
        <img class="feed-item-avatar" src="${item.companion.avatar}" alt="${item.companion.name}">
        <div class="feed-item-info">
          <h3>${item.companion.name}</h3>
          <p>${truncatedDescription}</p>
        </div>
      `;

      overlay.appendChild(companionLink);

      // Creator info
      if (item.companion.creator) {
        const creatorDiv = document.createElement('div');
        creatorDiv.className = 'feed-item-creator';
        creatorDiv.innerHTML = `<span>Image Generated by @${item.companion.creator}</span>`;
        overlay.appendChild(creatorDiv);
      }

      // Tags
      if (item.companion.tags && item.companion.tags.length > 0) {
        const tagsDiv = document.createElement('div');
        tagsDiv.className = 'feed-item-tags';
        item.companion.tags.slice(0, 4).forEach(tag => {
          const tagSpan = document.createElement('span');
          tagSpan.className = 'feed-tag';
          tagSpan.textContent = tag;
          tagsDiv.appendChild(tagSpan);
        });
        overlay.appendChild(tagsDiv);
      }

      // Action buttons (right side)
      const actions = document.createElement('div');
      actions.className = 'feed-item-actions';

      // Chat button
      const chatBtn = document.createElement('a');
      chatBtn.href = `/chat.html?char=${item.companion.slug}`;
      chatBtn.className = 'action-btn';
      chatBtn.innerHTML = `
        <svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path>
        </svg>
      `;

      // Like button (fire icon)
      const likeBtn = document.createElement('button');
      likeBtn.className = 'action-btn';
      likeBtn.onclick = () => toggleLike(item.id, likeBtn);
      likeBtn.innerHTML = `
        <svg class="action-icon" viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"></path>
        </svg>
        <span class="action-count">${item.like_count || 0}</span>
      `;

      actions.appendChild(chatBtn);
      actions.appendChild(likeBtn);

      div.appendChild(img);
      div.appendChild(overlay);
      div.appendChild(actions);

      return div;
    }

    // Toggle like (mock implementation)
    function toggleLike(itemId, buttonEl) {
      console.log('â¤ï¸ Like toggled for:', itemId);

      // Find item
      const item = feedItems.find(i => i.id === itemId);
      if (!item) return;

      // Toggle liked state
      const isLiked = buttonEl.classList.contains('liked');
      if (isLiked) {
        buttonEl.classList.remove('liked');
        item.like_count = Math.max(0, item.like_count - 1);
      } else {
        buttonEl.classList.add('liked');
        item.like_count++;
      }

      // Update count
      const countEl = buttonEl.querySelector('.action-count');
      if (countEl) {
        countEl.textContent = item.like_count;
      }

      // Animate
      buttonEl.style.transform = 'scale(1.2)';
      setTimeout(() => {
        buttonEl.style.transform = '';
      }, 200);

      // Update status
      const statusEl = document.getElementById('testStatus');
      statusEl.textContent = `${isLiked ? 'Unliked' : 'Liked'} ${item.companion.name}`;
    }
  </script>
</body>
</html>
